# 开场白

尊敬的各位领导，导师。晚上好。感谢大家参与今天的转正答辩。我叫曾泳坤，我的导师和主管都是在现场的光明老师。今天的答辩主要分为三个部分：个人简介、学习和工作的总结，以及下一步的目标和计划。

# 自我介绍

首先让我来做自我介绍，我于19年毕业于华侨大学，有三年的前端工作经验。前两年在厦门的一家公司，第三年来到华为的HDP-CFG项目组工作。在中软工作6个月后转到德科这边继续担任CFG的前端开发。

# 学习内容

接下来是我个人的学习和工作的总结，以及优点和待改进点。（1min）

在这5个多月中，我主要的学习内容为，学习可信知识，取得了入门级证书，并通过了专业级的科目二考试。学习JS编程规范和相关知识，在代码检视中提出了150条检视意见，输出了一篇技术博客。

我深入学习了前端开发框架Vue，主持了Vue2.7、Vue3的前端分享会。在wiki上输出了包含录屏的相关交付件。

我参加了OD的三营培训，并获得了优秀学员的称号。（1min）

# 工作内容

我的工作内容主要集中在三大特性：遗留问题、报告助手、帮助中心，以及一些DFX需求。（什么是 DFX ？）

在遗留问题特性中，我进行了微前端的解耦重构，交付代码5K行，完成了该特性与主应用的解耦脱钩（为什么要解耦），重构完成后，存量代码相比之前下降了45%。

在报告助手特性中，我把邮件的内容由 图片 改为文字+图片。使得发送后，用户可以选中和复制其中的文字内容。上线后同上月比较，访问量同比上升了70%。

在帮助中心特性中，我完成了文档在线化展示以及文档的上传与发布功能。用户阅读HDP操作指导书的等待时间平均下降了80%。

最后两个DFX需求，第一个，我做了第三方库echarts的按需引入，完成后HDP全部的页面的关键性能指标（FCP，LCP）（什么是关键性能，你怎么识别的），并且输出了按需加载的方案。第二个我做了Vue3的兼容整改，兼容了Vue3不支持的功能，现网内的组件内部通信健壮稳定，并输出了相关的技术博客。

接下里让我来展开说明工作的内容。（1.5min）

## 遗留问题管理

解耦重构遗留问题管理的背景是：当前的HDP的特性日益增多，原有的业务耦合度高，维护成本大，遗留问题功能比较稳定，没有新增业务，存量的代码腐朽老旧，迭代和维护的需要花费大量时间理解，以及容易引发新问题。

目标就是：整个业务满足颗粒化需求，做到独立开发、独立部署、独立测试、独立上线。

下面就是最后的成果，大家可以看到遗留问题主要内容是一个表格加上与之交互的按钮组构成。包含了行内编辑、鉴权、自定义列、个性化等功能。

在重构过程中，我运用了重构手法消除了代码的坏味道，存量的代码量下降了45%。

读ppt（1.5min）



接下里是我在解耦过程中遇到的问题。表单输入框演示显示。大家可以先看右上角的最终效果对比，上下两个输入框是同时间输入的，但是可以明显看到，下面的输入框的文字比上面的要快很多展示出来。

这个现象是在表格的数据量很多的情况下，表单输入延迟很高，通过性能分析工具可以得出我们单次键入一个文字，需要等待296ms 也就是左边的图片中写着keypress的一栏。然后由于每次一输入文字，页面就立即更新因此这个等待的时间会线性叠加起来。最明显的感受是你一次性输入5个字符，需要等待1.5s才看得见字符蹦出来。

解决的方法就是类似于网络请求的节流，单位时间内多次键入的话，最后才更新。

方案一由于 ipd 的内部设计问题无法直接实现

方案二采用原生的输入框，加上ipd的样式来统一UI风格，解决了这个问题。

右边第三栏有个具体对比的表格，当单位时间内键入文字越多时，性能差异越明显。（2min）



## 报告助手

邮件发送后可复制的背景是，之前发送后，用户收到的报告是一整张图片，也就是把网页转成一张长图，存在无法对图片中的文字进行选择和复制的问题。

需求的目标是用户可选中里面的文字内容，以及报告和网页展示的基本一致。

大家可以看下图片中演示的功能，在outlook客户端中，我可以选中并且复制报告中的文字，然后粘贴在左上角上。

这个功能的技术选型的话我主要考虑了三个：mhtml、重新绘制dom、原有的dom加个性化。

根据以下的对比，折优选出了原有dom+个性化这个方案。

左下角是实现过程的文字阐述，包括对文字和表格采用抓取dom，并利用正则进行去掉没必要的属性。

对于图片统一转成base64格式，并且过大的要进行裁切。

采用邮件端兼容性好的css样式和布局，因为很多样式和布局都是不支持的。

中间是一些代码的实践，右边是关于这个实现的流程。遍历报告的每个章节，对其他的文字和图片进行分别处理（2min）

## 帮助中心

帮助中心文档在线化的背景是，当前的等待时间很长，之前的技术方案是下载pdf后在iframe框架里进行展示，用户在阅读操作指导书的时候，网速很快的情况下等待时间都要10s，并且阅读状态会随着刷新丢失，运营人员需要到别的网站进行上传。

主要的目标是等待时间降到3s内，可以刷新后保持状态，以及运营在当前网站就可以维护文档。

图片里面展示了文档在线化和后台管理的功能

在做文档在线化过程中遇到一个难点是做出左边的目录树，其中有三个解决方案，一是使用aui组件，但是不满足组件归一化被否决了，二是使用ipd组件但是用模板写法，这个缺点是你需要多次的遍历。并且由于子层级不确定，后续添加子层级菜单就会出bug。三就是使用ipd组件加vue的高级特性 render函数。原理就是先组装成树形数据，在遍历树，生成子菜单和最后的节点。右边是代码的实践。（1.5min）

## 工作优点 目标 （1min）









重构的手法有哪些

重构的时机

代码几种坏味道









